@startuml
!define ACTIVATE_ENTITY Repository <<Database>> #008000
skinparam Style strictuml

actor User
participant ClassSetView
participant TrackingProgressView
participant TrackingProgressController
participant TrackingProgressService
participant Exception
participant Dto
database Repository as ACTIVATE_ENTITY

User -> ClassSetView: Click Button "Tracking"
activate ClassSetView
ClassSetView -> TrackingProgressView: Send Request
activate TrackingProgressView
TrackingProgressView -> TrackingProgressController: Send Request
activate TrackingProgressController
TrackingProgressController -> TrackingProgressService: Do method trackingProgressClassSet()
activate TrackingProgressService
TrackingProgressService -> Exception : Check Authorization
activate Exception
alt Un Authorized
    Exception --> TrackingProgressService : Un Authorized
    activate Exception
    deactivate Exception
    activate TrackingProgressService
    TrackingProgressService --> TrackingProgressController: Return Mess error
    activate TrackingProgressController
    deactivate TrackingProgressService
    TrackingProgressController --> TrackingProgressView : Send Mess
    activate TrackingProgressView
    deactivate TrackingProgressController
    TrackingProgressView --> ClassSetView :Send Mess
    activate ClassSetView
    deactivate TrackingProgressView
    ClassSetView --> User : Display Mess
    deactivate ClassSetView
else Authorized

    Exception --> TrackingProgressService : Authorized
    activate Exception
        deactivate Exception

    activate TrackingProgressService
    TrackingProgressService -> Repository : get Data Tracking in ClassSet

    activate Repository
    Repository --> TrackingProgressService : Return Data
    TrackingProgressService -> Dto : Convert Data
    activate Dto
    Dto --> TrackingProgressService : Return Data
    deactivate  Dto
    activate TrackingProgressController
    TrackingProgressService --> TrackingProgressController : Send Data
    deactivate TrackingProgressService
    TrackingProgressController --> TrackingProgressView : Send Data
    activate TrackingProgressView
    deactivate TrackingProgressController
    TrackingProgressView --> User : Display Data
    deactivate TrackingProgressView
    deactivate Exception

end



@enduml
